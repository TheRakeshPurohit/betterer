"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[77],{3905:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return d}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=n.createContext({}),u=function(e){var t=n.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(o.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,s=e.originalType,o=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),f=u(r),d=a,m=f["".concat(o,".").concat(d)]||f[d]||c[d]||s;return r?n.createElement(m,i(i({ref:t},p),{},{components:r})):n.createElement(m,i({ref:t},p))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=r.length,i=new Array(s);i[0]=f;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var u=2;u<s;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},8866:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return l},contentTitle:function(){return o},metadata:function(){return u},toc:function(){return p},default:function(){return f}});var n=r(7462),a=r(3366),s=(r(7294),r(3905)),i=["components"],l={id:"results-file",title:"Results file",sidebar_label:"Results file",slug:"/results-file"},o=void 0,u={unversionedId:"results-file",id:"results-file",isDocsHomePage:!1,title:"Results file",description:"All your test results will be saved in a results file. By default, Betterer sets this to be .betterer.results, but you can change that by using the --results flag when running Betterer.",source:"@site/docs/results-file.md",sourceDirName:".",slug:"/results-file",permalink:"/betterer/docs/results-file",editUrl:"https://github.com/phenomnomnominal/betterer/edit/master/website/docs/results-file.md",version:"current",lastUpdatedBy:"Craig Spence",lastUpdatedAt:1614393388,formattedLastUpdatedAt:"2/27/2021",frontMatter:{id:"results-file",title:"Results file",sidebar_label:"Results file",slug:"/results-file"},sidebar:"docs",previous:{title:"Tests",permalink:"/betterer/docs/tests"},next:{title:"Betterer & TypeScript",permalink:"/betterer/docs/betterer-and-typescript"}},p=[{value:"BettererFileTest results",id:"bettererfiletest-results",children:[]}],c={toc:p};function f(e){var t=e.components,r=(0,a.Z)(e,i);return(0,s.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"All your test results will be saved in a results file. By default, ",(0,s.kt)("strong",{parentName:"p"},"Betterer")," sets this to be ",(0,s.kt)("inlineCode",{parentName:"p"},".betterer.results"),", but you can change that by using the ",(0,s.kt)("a",{parentName:"p",href:"./running-betterer#start-options"},(0,s.kt)("inlineCode",{parentName:"a"},"--results"))," flag when running ",(0,s.kt)("strong",{parentName:"p"},"Betterer"),"."),(0,s.kt)("p",null,"The results file is similar to a ",(0,s.kt)("a",{parentName:"p",href:"https://jestjs.io/docs/en/snapshot-testing"},"Jest Snapshot file"),". It should be ",(0,s.kt)("a",{parentName:"p",href:"./development-workflow"},"commited along with your code")," and probably shouldn't be ",(0,s.kt)("a",{parentName:"p",href:"./updating-results"},"updated")," manually (although you of course can if you're feeling confident!)."),(0,s.kt)("p",null,"The results file will look something like this:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},'// BETTERER RESULTS V2.\nexports[`no hack comments`] = {\n  value: `{\n    "packages/cli/src/cli.ts:1074837834": [\n      [13, 0, 7, "RegExp match", "645651780"]\n    ],\n    "packages/cli/src/init/update-package-json.ts:2842907794": [\n      [34, 4, 7, "RegExp match", "645651780"]\n    ]\n  }`\n};\n')),(0,s.kt)("p",null,"This is a valid JavaScript file, so you can import it and manipulate it if you need to. Each test will have an object that stores its result value, which can be controlled by a tests ",(0,s.kt)("a",{parentName:"p",href:"./betterer-test#bettererserialiser"},(0,s.kt)("inlineCode",{parentName:"a"},"serialiser"))," and ",(0,s.kt)("a",{parentName:"p",href:"./betterer-test#bettererprinter"},(0,s.kt)("inlineCode",{parentName:"a"},"printer"))," options."),(0,s.kt)("p",null,"When your tests run, ",(0,s.kt)("strong",{parentName:"p"},"Betterer")," will check to see the result against the expected result in the results file. If the new result is better, the results file will be updated, and that result will be the expected baseline going forward."),(0,s.kt)("h3",{id:"bettererfiletest-results"},(0,s.kt)("a",{parentName:"h3",href:"./betterer-file-test#bettererfiletest"},(0,s.kt)("inlineCode",{parentName:"a"},"BettererFileTest"))," results"),(0,s.kt)("p",null,"The above example comes from a ",(0,s.kt)("a",{parentName:"p",href:"./betterer-file-test#bettererfiletest"},(0,s.kt)("inlineCode",{parentName:"a"},"BettererFileTest")),", which has some note-worthy details. A ",(0,s.kt)("a",{parentName:"p",href:"./betterer-file-test#bettererfiletest"},(0,s.kt)("inlineCode",{parentName:"a"},"BettererFileTest"))," result has the following format:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},'exports[testName]: {\n value: `{\n    "relativeFilePath:fileHash": [\n      [issueLine, issueColumn, length, issueMessage, issueHash]\n      // ... more issues\n    ],\n    // ... more files\n }`\n}\n')),(0,s.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,s.kt)("div",{parentName:"div",className:"admonition-heading"},(0,s.kt)("h5",{parentName:"div"},(0,s.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,s.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,s.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,s.kt)("div",{parentName:"div",className:"admonition-content"},(0,s.kt)("p",{parentName:"div"},(0,s.kt)("inlineCode",{parentName:"p"},"fileHash")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"issueHash")," are used to track issues as the lines of code in a file change, or as the file moves around in the codebase. This means they change quite often! Check out ",(0,s.kt)("a",{parentName:"p",href:"./development-workflow"},"development workflow")," for suggested ways to handle this with source control."))))}f.isMDXComponent=!0}}]);