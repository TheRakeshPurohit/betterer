"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[999],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return m}});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var o=n.createContext({}),p=function(e){var t=n.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(r),m=i,h=c["".concat(o,".").concat(m)]||c[m]||d[m]||a;return r?n.createElement(h,l(l({ref:t},u),{},{components:r})):n.createElement(h,l({ref:t},u))}));function m(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=r.length,l=new Array(a);l[0]=c;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:i,l[1]=s;for(var p=2;p<a;p++)l[p]=r[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},8215:function(e,t,r){var n=r(7294);t.Z=function(e){var t=e.children,r=e.hidden,i=e.className;return n.createElement("div",{role:"tabpanel",hidden:r,className:i},t)}},5064:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(7294),i=r(9443);var a=function(){var e=(0,n.useContext)(i.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},l=r(6010),s="tabItem_1uMI",o="tabItemActive_2DSg";var p=37,u=39;var d=function(e){var t=e.lazy,r=e.block,i=e.defaultValue,d=e.values,c=e.groupId,m=e.className,h=a(),f=h.tabGroupChoices,k=h.setTabGroupChoices,b=(0,n.useState)(i),N=b[0],g=b[1],v=n.Children.toArray(e.children),y=[];if(null!=c){var F=f[c];null!=F&&F!==N&&d.some((function(e){return e.value===F}))&&g(F)}var B=function(e){var t=e.currentTarget,r=y.indexOf(t),n=d[r].value;g(n),null!=c&&(k(c,n),setTimeout((function(){var e,r,n,i,a,l,s,p;(e=t.getBoundingClientRect(),r=e.top,n=e.left,i=e.bottom,a=e.right,l=window,s=l.innerHeight,p=l.innerWidth,r>=0&&a<=p&&i<=s&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(o),setTimeout((function(){return t.classList.remove(o)}),2e3))}),150))},C=function(e){var t,r;switch(e.keyCode){case u:var n=y.indexOf(e.target)+1;r=y[n]||y[0];break;case p:var i=y.indexOf(e.target)-1;r=y[i]||y[y.length-1]}null==(t=r)||t.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":r},m)},d.map((function(e){var t=e.value,r=e.label;return n.createElement("li",{role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,className:(0,l.Z)("tabs__item",s,{"tabs__item--active":N===t}),key:t,ref:function(e){return y.push(e)},onKeyDown:C,onFocus:B,onClick:B},r)}))),t?(0,n.cloneElement)(v.filter((function(e){return e.props.value===N}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},v.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==N})}))))}},9443:function(e,t,r){var n=(0,r(7294).createContext)(void 0);t.Z=n},3944:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return p},contentTitle:function(){return u},metadata:function(){return d},toc:function(){return c},default:function(){return h}});var n=r(7462),i=r(3366),a=(r(7294),r(3905)),l=r(5064),s=r(8215),o=["components"],p={id:"betterer-file-test",title:"Betterer File Test",description:"Betterer File Test API reference",slug:"/betterer-file-test"},u=void 0,d={unversionedId:"api/betterer-file-test",id:"api/betterer-file-test",isDocsHomePage:!1,title:"Betterer File Test",description:"Betterer File Test API reference",source:"@site/docs/api/file-test.md",sourceDirName:"api",slug:"/betterer-file-test",permalink:"/betterer/docs/betterer-file-test",editUrl:"https://github.com/phenomnomnominal/betterer/edit/master/website/docs/api/file-test.md",version:"current",lastUpdatedBy:"Craig Spence",lastUpdatedAt:1614393388,formattedLastUpdatedAt:"2/27/2021",frontMatter:{id:"betterer-file-test",title:"Betterer File Test",description:"Betterer File Test API reference",slug:"/betterer-file-test"},sidebar:"api",previous:{title:"Betterer Test",permalink:"/betterer/docs/betterer-test"},next:{title:"Betterer contraints",permalink:"/betterer/docs/constraints"}},c=[{value:"<code>BettererFileTest</code>",id:"bettererfiletest",children:[{value:"Constructor",id:"constructor",children:[]},{value:"Properties",id:"properties",children:[]},{value:"Methods",id:"methods",children:[]},{value:"<code>include()</code>",id:"include",children:[]},{value:"<code>exclude()</code>",id:"exclude",children:[]}]},{value:"<code>BettererFileResolver</code>",id:"bettererfileresolver",children:[{value:"Constructor",id:"constructor-1",children:[]}]},{value:"<code>BettererFileTestFunction</code>",id:"bettererfiletestfunction",children:[]},{value:"<code>BettererFileTestResult</code>",id:"bettererfiletestresult",children:[{value:"Methods",id:"methods-1",children:[]},{value:"<code>addFile()</code>",id:"addfile",children:[]},{value:"<code>getIssues()</code>",id:"getissues",children:[]}]},{value:"<code>BettererFileBase</code>",id:"bettererfilebase",children:[{value:"Properties",id:"properties-1",children:[]}]},{value:"<code>BettererFile</code>",id:"bettererfile",children:[{value:"Properties",id:"properties-2",children:[]},{value:"Methods",id:"methods-2",children:[]},{value:"<code>addIssue()</code>",id:"addissue",children:[]}]},{value:"<code>BettererFileGlobs</code>",id:"bettererfileglobs",children:[]},{value:"<code>BettererFilePatterns</code>",id:"bettererfilepatterns",children:[]},{value:"<code>BettererFileDiff</code>",id:"bettererfilediff",children:[{value:"Properties",id:"properties-3",children:[]}]},{value:"<code>BettererFilesDiff</code>",id:"bettererfilesdiff",children:[]},{value:"<code>BettererFileTestDiff</code>",id:"bettererfiletestdiff",children:[]},{value:"<code>BettererFileIssue</code>",id:"bettererfileissue",children:[{value:"Properties",id:"properties-4",children:[]}]},{value:"<code>BettererFileIssues</code>",id:"bettererfileissues",children:[]}],m={toc:c};function h(e){var t=e.components,r=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"bettererfiletest"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileTest")),(0,a.kt)("p",null,"One very common usecase for ",(0,a.kt)("strong",{parentName:"p"},"Betterer")," is to track issues across all the files in a project. ",(0,a.kt)("inlineCode",{parentName:"p"},"BettererFileTest")," provides a wrapper around ",(0,a.kt)("a",{parentName:"p",href:"./betterer-test#betterertest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererTest"))," that makes it easier to implement such a test. It also provides a useful example for the more complex possibilities of the ",(0,a.kt)("a",{parentName:"p",href:"./betterer-test#betterertestoptions"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererTestOptions"))," interface"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"class BettererFileTest\n  constructor(_resolver: BettererFileResolver, fileTest: BettererFileTestFunction);\n  exclude(...excludePatterns: BettererFilePatterns): this;\n  include(...includePatterns: BettererFileGlobs): this;\n}\n")),(0,a.kt)("h3",{id:"constructor"},"Constructor"),(0,a.kt)("p",null,"Args:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"resolver"),": ",(0,a.kt)("a",{parentName:"li",href:"#bettererfileresolver"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileResolver"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"fileTest"),": ",(0,a.kt)("a",{parentName:"li",href:"#bettererfiletestfunction"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTestFunction")))),(0,a.kt)("h4",{id:"usage"},"Usage"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { BettererFileResolver, BettererFileTest } from '@betterer/betterer';\n\nconst resolver = new BettererFileResolver();\nconst test = new BettererFileTest(resolver, (filePaths, fileTestResult) => {\n  // test code here:\n  // get issues for each file and add them to the fileTestResult\n});\n")),(0,a.kt)("h3",{id:"properties"},"Properties"),(0,a.kt)("p",null,"All the properties from ",(0,a.kt)("a",{parentName:"p",href:"./betterer-test#betterertest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererTest")),"."),(0,a.kt)("h3",{id:"methods"},"Methods"),(0,a.kt)("p",null,"All the methods from ",(0,a.kt)("a",{parentName:"p",href:"./betterer-test#betterertest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererTest"))," and:"),(0,a.kt)("h3",{id:"include"},(0,a.kt)("inlineCode",{parentName:"h3"},"include()")),(0,a.kt)("p",null,"Add a list of glob patterns for files to include when running the test."),(0,a.kt)("p",null,"Args:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"...includePatterns"),": ",(0,a.kt)("a",{parentName:"li",href:"#bettererfileglobs"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileGlobs")))),(0,a.kt)("p",null,"Returns: ",(0,a.kt)("a",{parentName:"p",href:"#bettererfiletest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTest"))),(0,a.kt)("h3",{id:"exclude"},(0,a.kt)("inlineCode",{parentName:"h3"},"exclude()")),(0,a.kt)("p",null,"A list of RegExp filters for files to exclude when running the test."),(0,a.kt)("p",null,"Args:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"...excludePatterns"),": ",(0,a.kt)("a",{parentName:"li",href:"#bettererfilepatterns"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFilePatterns")))),(0,a.kt)("p",null,"Returns: ",(0,a.kt)("a",{parentName:"p",href:"#bettererfiletest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTest"))),(0,a.kt)("h2",{id:"bettererfileresolver"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileResolver")),(0,a.kt)("p",null,"A ",(0,a.kt)("a",{parentName:"p",href:"#bettererfiletest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTest"))," takes a ",(0,a.kt)("inlineCode",{parentName:"p"},"BettererFileResolver")," as its first argument. This is a little bit of magic to make it easier to define file paths for the test."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"class BettererFileResolver {\n  get cwd(): string;\n  constructor(resolverDepth?: number);\n  files(filePaths: BettererFilePaths): Promise<BettererFilePaths>;\n  resolve(...pathSegments: Array<string>): string;\n  validate(filePaths: BettererFilePaths): Promise<BettererFilePaths>;\n}\n")),(0,a.kt)("h3",{id:"constructor-1"},"Constructor"),(0,a.kt)("p",null,"Args:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"relativeDepth"),": ",(0,a.kt)("inlineCode",{parentName:"li"},"number")," (default, ",(0,a.kt)("inlineCode",{parentName:"li"},"2"),")")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"BettererFileResolver")," takes a single argument (",(0,a.kt)("inlineCode",{parentName:"p"},"relativeDepth"),"), which defines the callstack depth between where a relative path is defined and where it is used."),(0,a.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"This is definitely magic, and may be subject to change in the future if there proves to be too many edge cases. For now, it works well enough and removes the need for some fiddly file resolving code."))),(0,a.kt)("p",null,"By default is it set to ",(0,a.kt)("inlineCode",{parentName:"p"},"2"),". This is because most ",(0,a.kt)("inlineCode",{parentName:"p"},"BettererFileTests")," are not created directly, but rather by a factory function:"),(0,a.kt)(l.Z,{defaultValue:".betterer.ts",values:[{label:".betterer.ts",value:".betterer.ts"},{label:"./src/myFileTest.ts",value:"./src/myFileTest.ts"}],mdxType:"Tabs"},(0,a.kt)(s.Z,{value:".betterer.ts",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title=".betterer.ts"',title:'".betterer.ts"'},"import { myFileTest } from './src/myFileTest';\n\nmyFileTest('../some/path');\n"))),(0,a.kt)(s.Z,{value:"./src/myFileTest.ts",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="./src/myFileTest.ts"',title:'"./src/myFileTest.ts"'},"import { BettererFileResolver } from '@betterer/betterer';\n\nexport function myFileTest(filePath) {\n  const resolver = new BettererFileResolver();\n  const absolutePath = resolver.resolve(filePath);\n  // absolutePath is resolved relative to the file where `myFileTest` was called.\n}\n")))),(0,a.kt)("p",null,"For each function call between the ",(0,a.kt)("inlineCode",{parentName:"p"},"filePath")," and the ",(0,a.kt)("inlineCode",{parentName:"p"},"BettererFileResolve")," constructor, ",(0,a.kt)("inlineCode",{parentName:"p"},"relativeDepth")," should be incremented:"),(0,a.kt)(l.Z,{defaultValue:".betterer.ts",values:[{label:".betterer.ts",value:".betterer.ts"},{label:"./src/myOtherFileTest.ts",value:"./src/myOtherFileTest.ts"}],mdxType:"Tabs"},(0,a.kt)(s.Z,{value:".betterer.ts",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title=".betterer.ts"',title:'".betterer.ts"'},"import { myOtherFileTest } from './src/myOtherFileTest';\n\nmyOtherFileTest('../some/path');\n"))),(0,a.kt)(s.Z,{value:"./src/myOtherFileTest.ts",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript",metastring:'title="./src/myOtherFileTest.ts"',title:'"./src/myOtherFileTest.ts"'},"import { BettererFileResolver } from '@betterer/betterer';\n\nexport function myOtherFileTest(filePath) {\n  return createTest(filePath);\n}\n\nfunction createTest(filePath) {\n  const resolver = new BettererFileResolver(3);\n  const absolutePath = resolver.resolve(filePath);\n  // absolutePath is resolved relative to the file where `myOtherFileTest` was called.\n}\n")))),(0,a.kt)("h4",{id:"usage-1"},"Usage"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"import { BettererFileResolver } from '@betterer/betterer';\n\nconst resolver = new BettererFileResolver();\n")),(0,a.kt)("h2",{id:"bettererfiletestfunction"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileTestFunction")),(0,a.kt)("p",null,"A function that runs an actual file test."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"export declare type BettererFileTestFunction = (\n  filePaths: BettererFilePaths,\n  fileTestResult: BettererFileTestResult\n) => MaybeAsync<void>;\n")),(0,a.kt)("p",null,"Args:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"filePaths"),": ",(0,a.kt)("a",{parentName:"li",href:"./runner#bettererfilepaths"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFilePaths"))," - A list of file paths that will be checked."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"fileTestResult"),": ",(0,a.kt)("a",{parentName:"li",href:"#bettererfiletestresult"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTestResult"))," -")),(0,a.kt)("p",null,"Returns: ",(0,a.kt)("inlineCode",{parentName:"p"},"Promise<void>")," | ",(0,a.kt)("inlineCode",{parentName:"p"},"void")),(0,a.kt)("h2",{id:"bettererfiletestresult"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileTestResult")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"./betterer-test#deseriliasedtype-default-unknown"},(0,a.kt)("inlineCode",{parentName:"a"},"DeserialisedType"))," of a ",(0,a.kt)("a",{parentName:"p",href:"#bettererfiletest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTest")),". It is a set of ",(0,a.kt)("a",{parentName:"p",href:"#bettererfile"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFile")),"s which each have their own set of ",(0,a.kt)("a",{parentName:"p",href:"#bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileIssues")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFileTestResult = {\n  addFile(absolutePath: string, fileText: string): BettererFile;\n  getIssues(absolutePath: string): BettererFileIssues;\n};\n")),(0,a.kt)("h3",{id:"methods-1"},"Methods"),(0,a.kt)("h3",{id:"addfile"},(0,a.kt)("inlineCode",{parentName:"h3"},"addFile()")),(0,a.kt)("p",null,"Add a new file to the result set."),(0,a.kt)("p",null,"Args:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"absolutePath"),": ",(0,a.kt)("inlineCode",{parentName:"li"},"string")," - The absolute path to the file."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"fileText"),": ",(0,a.kt)("inlineCode",{parentName:"li"},"string")," - The current text content of the file.")),(0,a.kt)("p",null,"Returns: ",(0,a.kt)("a",{parentName:"p",href:"#bettererfile"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFile"))),(0,a.kt)("h3",{id:"getissues"},(0,a.kt)("inlineCode",{parentName:"h3"},"getIssues()")),(0,a.kt)("p",null,"Get the set of ",(0,a.kt)("a",{parentName:"p",href:"#bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileIssues"))," for a file at the given path."),(0,a.kt)("p",null,"Args:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"absolutePath"),": ",(0,a.kt)("inlineCode",{parentName:"li"},"string")," - The absolute path to the file.")),(0,a.kt)("p",null,"Returns: ",(0,a.kt)("a",{parentName:"p",href:"#bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileIssues"))),(0,a.kt)("h2",{id:"bettererfilebase"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileBase")),(0,a.kt)("p",null,"A part of the ",(0,a.kt)("a",{parentName:"p",href:"./betterer-test#serialisedtype-default-deserialisedtype"},(0,a.kt)("inlineCode",{parentName:"a"},"SerialisedType"))," of a ",(0,a.kt)("a",{parentName:"p",href:"#bettererfiletestresult"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTestResult")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFileBase = {\n  readonly absolutePath: string;\n  readonly hash: string;\n  readonly issues: BettererFileIssues;\n  readonly key: string;\n};\n")),(0,a.kt)("h3",{id:"properties-1"},"Properties"),(0,a.kt)("h4",{id:"absolutepath-string"},(0,a.kt)("inlineCode",{parentName:"h4"},"absolutePath"),": ",(0,a.kt)("inlineCode",{parentName:"h4"},"string")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The absolute path to the file.")),(0,a.kt)("h4",{id:"hash-string"},(0,a.kt)("inlineCode",{parentName:"h4"},"hash"),": ",(0,a.kt)("inlineCode",{parentName:"h4"},"string")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The hash for the file (usually the hash of the file contents). The ",(0,a.kt)("inlineCode",{parentName:"p"},"hash")," is used for tracking files as they move around within a codebase.")),(0,a.kt)("h4",{id:"issues-bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"h4"},"issues"),": ",(0,a.kt)("a",{parentName:"h4",href:"#bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileIssues"))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The set of issues for the file.")),(0,a.kt)("h4",{id:"key-string"},(0,a.kt)("inlineCode",{parentName:"h4"},"key"),": ",(0,a.kt)("inlineCode",{parentName:"h4"},"string")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The key used for identifying the file in the ",(0,a.kt)("a",{parentName:"p",href:"./results-file"},"results file"))),(0,a.kt)("h2",{id:"bettererfile"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFile")),(0,a.kt)("p",null,"A part of the ",(0,a.kt)("a",{parentName:"p",href:"./betterer-test#deserialisedtype-default-unknown"},(0,a.kt)("inlineCode",{parentName:"a"},"DeserialisedType"))," of a ",(0,a.kt)("a",{parentName:"p",href:"#bettererfiletestresult"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTestResult")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFile = BettererFileBase & {\n  addIssue(start: number, end: number, message: string, hash?: string): void;\n  addIssue(line: number, col: number, length: number, message: string, hash?: string): void;\n  addIssue(startLine: number, startCol: number, endLine: number, endCol: number, message: string, hash?: string): void;\n};\n")),(0,a.kt)("h3",{id:"properties-2"},"Properties"),(0,a.kt)("p",null,"All the properties from ",(0,a.kt)("a",{parentName:"p",href:"#bettererfilebase"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileBase")),"."),(0,a.kt)("h3",{id:"methods-2"},"Methods"),(0,a.kt)("h3",{id:"addissue"},(0,a.kt)("inlineCode",{parentName:"h3"},"addIssue()")),(0,a.kt)("p",null,"Add a new issue to the file. Three different overloaded versions to handle common structures from libraries."),(0,a.kt)("p",null,"Returns: ",(0,a.kt)("inlineCode",{parentName:"p"},"void")),(0,a.kt)("h2",{id:"bettererfileglobs"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileGlobs")),(0,a.kt)("p",null,"A list of glob patterns for files to include when running a ",(0,a.kt)("a",{parentName:"p",href:"#bettererfiletest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTest")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFileGlobs = ReadonlyArray<string | ReadonlyArray<string>>;\n")),(0,a.kt)("h2",{id:"bettererfilepatterns"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFilePatterns")),(0,a.kt)("p",null,"A list of RegExp filters for files to exclude when running a ",(0,a.kt)("a",{parentName:"p",href:"#bettererfiletest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTest")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFilePatterns = ReadonlyArray<RegExp | ReadonlyArray<RegExp>>;\n")),(0,a.kt)("h2",{id:"bettererfilediff"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileDiff")),(0,a.kt)("p",null,"A diff object for a single file"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFileDiff = {\n  fixed?: BettererFileIssues;\n  existing?: BettererFileIssues;\n  new?: BettererFileIssues;\n};\n")),(0,a.kt)("h3",{id:"properties-3"},"Properties"),(0,a.kt)("h4",{id:"fixed-bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"h4"},"fixed"),": ",(0,a.kt)("a",{parentName:"h4",href:"#bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileIssues"))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The list of issues that have been fixed since the last run")),(0,a.kt)("h4",{id:"existing-bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"h4"},"existing"),": ",(0,a.kt)("a",{parentName:"h4",href:"#bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileIssues"))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The list of issues that have not changed since the last run")),(0,a.kt)("h4",{id:"new-bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"h4"},"new"),": ",(0,a.kt)("a",{parentName:"h4",href:"#bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileIssues"))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The list of new issues since the last run")),(0,a.kt)("h2",{id:"bettererfilesdiff"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFilesDiff")),(0,a.kt)("p",null,"A map from file path to ",(0,a.kt)("a",{parentName:"p",href:"#bettererfilediff"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileDiff")),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFilesDiff = Record<string, BettererFileDiff>;\n")),(0,a.kt)("h2",{id:"bettererfiletestdiff"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileTestDiff")),(0,a.kt)("p",null,"A diff object for a complete ",(0,a.kt)("a",{parentName:"p",href:"#bettererfiletest"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileTest"))," run."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFileTestDiff = BettererDiff<BettererFileTestResult, BettererFilesDiff>;\n")),(0,a.kt)("h2",{id:"bettererfileissue"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileIssue")),(0,a.kt)("p",null,"A object that describe an issue in a file."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFileIssue = {\n  readonly line: number;\n  readonly column: number;\n  readonly length: number;\n  readonly message: string;\n  readonly hash: string;\n};\n")),(0,a.kt)("h3",{id:"properties-4"},"Properties"),(0,a.kt)("h4",{id:"line-number"},(0,a.kt)("inlineCode",{parentName:"h4"},"line"),": ",(0,a.kt)("inlineCode",{parentName:"h4"},"number")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The line number in the file that has an issue")),(0,a.kt)("h4",{id:"column-number"},(0,a.kt)("inlineCode",{parentName:"h4"},"column"),": ",(0,a.kt)("inlineCode",{parentName:"h4"},"number")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The column number in the line that has an issue")),(0,a.kt)("h4",{id:"length-number"},(0,a.kt)("inlineCode",{parentName:"h4"},"length"),": ",(0,a.kt)("inlineCode",{parentName:"h4"},"number")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The number of characters that cover the issue")),(0,a.kt)("h4",{id:"message-string"},(0,a.kt)("inlineCode",{parentName:"h4"},"message"),": ",(0,a.kt)("inlineCode",{parentName:"h4"},"string")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"A message that describes the issue")),(0,a.kt)("h4",{id:"hash-string-1"},(0,a.kt)("inlineCode",{parentName:"h4"},"hash"),": ",(0,a.kt)("inlineCode",{parentName:"h4"},"string")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"A hash for the issue (usually the hash of the ",(0,a.kt)("inlineCode",{parentName:"p"},"message"),"). The ",(0,a.kt)("inlineCode",{parentName:"p"},"hash")," is used for tracking issues as they move around within a file.")),(0,a.kt)("h2",{id:"bettererfileissues"},(0,a.kt)("inlineCode",{parentName:"h2"},"BettererFileIssues")),(0,a.kt)("p",null,"A list of ",(0,a.kt)("a",{parentName:"p",href:"#bettererfileissue"},(0,a.kt)("inlineCode",{parentName:"a"},"BettererFileIssue"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"type BettererFileIssues = ReadonlyArray<BettererFileIssue>;\n")))}h.isMDXComponent=!0},6010:function(e,t,r){function n(e){var t,r,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(i&&(i+=" "),i+=t);return i}r.d(t,{Z:function(){return i}})}}]);