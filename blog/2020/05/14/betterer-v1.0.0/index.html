<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/betterer/blog/rss.xml" title="Betterer Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/betterer/blog/atom.xml" title="Betterer Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Betterer" href="/betterer/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:wght@300|Pacifico|Roboto+Mono&display=swap"><title data-react-helmet="true">Betterer v1.0.0 | Betterer</title><meta data-react-helmet="true" property="og:title" content="Betterer v1.0.0 | Betterer"><meta data-react-helmet="true" name="description" content="I&#x27;m stoked to announce v1.0.0 of Betterer!"><meta data-react-helmet="true" property="og:description" content="I&#x27;m stoked to announce v1.0.0 of Betterer!"><meta data-react-helmet="true" property="og:image" content="https://phenomnomnominal.github.io/betterer/img/betterer.png"><meta data-react-helmet="true" name="twitter:image" content="https://phenomnomnominal.github.io/betterer/img/betterer.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Betterer v1.0.0 | Betterer"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/betterer/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/betterer/styles.c5be809d.css">
<link rel="preload" href="/betterer/styles.f4cd9dbb.js" as="script">
<link rel="preload" href="/betterer/runtime~main.13df5492.js" as="script">
<link rel="preload" href="/betterer/main.32798573.js" as="script">
<link rel="preload" href="/betterer/1.674ee4f8.js" as="script">
<link rel="preload" href="/betterer/2.7bb78f3f.js" as="script">
<link rel="preload" href="/betterer/ccc49370.727e72fc.js" as="script">
<link rel="preload" href="/betterer/3d505d35.7db247e4.js" as="script">
<link rel="preload" href="/betterer/399ce58b.998d4301.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbarHideable_17Wu navbarHidden_19ww"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/betterer/"><img src="/betterer/img/logo.png" alt="Betterer Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/betterer/img/logo.png" alt="Betterer Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Betterer</strong></a><a class="navbar__item navbar__link" href="/betterer/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/betterer/docs/api">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/betterer/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/betterer/"><img src="/betterer/img/logo.png" alt="Betterer Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/betterer/img/logo.png" alt="Betterer Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Betterer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/betterer/docs/introduction">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/betterer/docs/api">API</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/betterer/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/betterer/blog/2020/05/14/improving-accessibility-with-betterer">Improving accessibility with Betterer</a></li><li class="sidebarItem_2T0D"><a aria-current="page" class="sidebarItemLink_v5H9 sidebarItemLinkActive_1anX" href="/betterer/blog/2020/05/14/betterer-v1.0.0">Betterer v1.0.0</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">Betterer v1.0.0</h1><div class="margin-vert--md"><time datetime="2020-05-14T00:00:00.000Z" class="blogPostDate_Ta7i">May 14, 2020  ¬∑ 8 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name"><a href="http://twitter.com/phenomnominal" target="_blank" rel="noreferrer noopener">Craig Spence</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>I&#x27;m stoked to announce <a href="https://www.npmjs.com/org/betterer" target="_blank" rel="noopener noreferrer">v1.0.0</a> of <a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer"><strong>Betterer</strong>!</a></p><p>I&#x27;ve been locked down in New Zealand for the last little while, and I&#x27;ve used some of that time to smash out what I think is a pretty compelling v1 release of a tool that I&#x27;m really excited about!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="what-is-betterer"></a>What is <strong>Betterer</strong>?<a class="hash-link" href="#what-is-betterer" title="Direct link to heading">#</a></h2><p><a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer"><strong>Betterer</strong></a> is a test runner that helps make incremental improvements to your code! It is based upon <a href="https://jestjs.io/docs/en/snapshot-testing" target="_blank" rel="noopener noreferrer"><strong>Jest</strong>&#x27;s snapshot testing</a>, but with a twist...</p><p>I&#x27;m sure many of us have been in situations where we&#x27;ve seen big changes we&#x27;d like to make, or new standards or design decisions that we&#x27;d like to encourage, but we just don&#x27;t have the time to do it.</p><p>Usually one of two things happen:</p><ol><li><p>You start a long-lived branch that is awful to maintain and often impossible to merge. It ends up being a time sink ‚è±</p></li><li><p>You and your team make an agreement to make the improvement over time. It gets forgotten about and nothing gets better (in fact usually it gets worse!) üòï</p></li></ol><p>I&#x27;ve seen this happen time and time and again! Sometimes it&#x27;s introducing a new style rule to a codebase. Other times it&#x27;s enabling stricter compilation, or decreasing the number of accessibility failures!</p><p><strong>Betterer</strong> works in two stages. The first time it runs a test, it will take a snapshot of the current state. From that point on, whenever it runs it will compare against that snapshot. It will either throw an error (if the test got worse ‚ùå), or update the snapshot (if the test got better ‚úÖ). That&#x27;s pretty much it!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="how-does-it-work"></a>How does it work?<a class="hash-link" href="#how-does-it-work" title="Direct link to heading">#</a></h2><p>To get started, you can run the following from the root of your project:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#000000"><div class="token-line" style="color:#F8F8F2"><span class="token plain">npx @betterer/cli init</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>That will give you a brand new <code>.betterer.ts</code> config file which looks something like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#000000"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// .betterer.ts</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Add tests here ‚òÄÔ∏è</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>From here, it&#x27;s up to you to add some tests!</p><p>Let&#x27;s imagine you&#x27;re working with a codebase that uses <a href="https://momentjs.com/" target="_blank" rel="noopener noreferrer"><strong>Moment.js</strong></a>. You&#x27;d like to migrate away from it for performance reasons.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#000000"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// src/subtract.js</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> moment </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;moment&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> now </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">moment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">subtract</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;years&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Let&#x27;s also imagine that you&#x27;re using <strong>ESLint</strong> in this codebase. One approach to remove <strong>Moment.js</strong> might be to use <a href="https://eslint.org/docs/rules/no-restricted-imports" target="_blank" rel="noopener noreferrer">the <code>no-restricted-imports</code> <strong>ESLint</strong> rule</a>, add the <code>eslint-disable-next-line</code> comment all over the place, and cross your fingers that people don&#x27;t just add more... ü§î</p><p>Betterer gives us a better option! We can create a test for that specific rule:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#000000"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// .betterer.ts</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> eslintBetterer </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;@betterer/eslint&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;no import from moment&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">eslintBetterer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;./src/**/*.js&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;no-restricted-imports&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;error&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;moment&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Please use &quot;date-fns&quot; instead.&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The first time we run the test with <strong>Betterer</strong>, it will look something like this:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/first-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run for the first time" title="First run"></p><p><strong>Betterer</strong> has now created a snapshot of the current state, stored by default in a <code>.betterer.results</code> file:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#000000"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// BETTERER RESULTS V1.</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">exports</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">no import from moment</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1589459511808</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token template-string string" style="color:rgb(255, 121, 198)">{</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">    &quot;src/subtract.js:566118541&quot;: [</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">      [0, 0, 33, &quot;\&#x27;moment\&#x27; import is restricted from being used. Please use \\&quot;date-fns\\&quot; instead.&quot;, &quot;4035178381&quot;]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">    ]</span></div><div class="token-line" style="color:#F8F8F2"><span class="token template-string string" style="color:rgb(255, 121, 198)">  }</span><span class="token template-string template-punctuation string" style="color:rgb(255, 121, 198)">`</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The snapshot contains information about the current issues in the code.</p><p>The next time we run the test, it will look like this:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/same-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run and stayed the same" title="Same run"></p><p>Now, someone else on the team comes along and doesn&#x27;t know about the new rule, and they add a new file that uses <strong>Moment.js</strong>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#000000"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// src/add.js</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> moment </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;moment&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> now </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">moment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">add</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;years&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>When <strong>Betterer</strong> runs on their code, they get a nice big error:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/worse-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run and got worse" title="Worse run"></p><p>Even though a new issue has been introduced, the <code>.betterer.results</code> file doesn&#x27;t change!</p><p>Our teammate reads the helpful error message from <strong>ESLint</strong> and they update their code to use <strong>date-fns</strong>...</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#000000"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// src/add.js</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> addYears </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;date-fns&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">log</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token function" style="color:rgb(80, 250, 123)">addYears</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token known-class-name class-name">Date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>... and once again <strong>Betterer</strong> tells them that the result is the same:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/same-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run and stayed the same" title="Same run"></p><p>Our teammate has a bit of time on their hands, so they decide to fix up our usage of <strong>Moment.js</strong> as well! üéâ</p><p>This time when they run <strong>Betterer</strong>, everything is good:</p><p><img src="https://raw.githubusercontent.com/phenomnomnominal/betterer/master/docs/images/better-run.gif" alt="Terminal output showing Betterer running and indicating that the &quot;no import from moment&quot; test has run and got better" title="Better run"></p><p>There are now no remaining issues, so this test has met its goal. Since the existing issue has been resolved, it is removed from the snapshot in the <code>.betterer.results</code> file. This means we can move the rule from <strong>Betterer</strong> over to the normal <strong>ESLint</strong> configuration, so we don&#x27;t reintroduce the issues again.</p><p>Pretty neat eh! That&#x27;s an example of the built-in <code>@betterer/eslint</code> test, but there are <a href="https://github.com/phenomnomnominal/betterer/tree/master/packages/typescript" target="_blank" rel="noopener noreferrer">other</a> <a href="https://github.com/phenomnomnominal/betterer/tree/master/packages/regexp" target="_blank" rel="noopener noreferrer">built-in</a> <a href="https://github.com/phenomnomnominal/betterer/tree/master/packages/tsquery" target="_blank" rel="noopener noreferrer">tests</a> too. And you can of course write your own tests! Check out the <a href="https://github.com/phenomnomnominal/betterer#custom-tests" target="_blank" rel="noopener noreferrer">documentation for more details</a> (still a WIP üöß)!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="whats-in-v100"></a>What&#x27;s in v1.0.0?<a class="hash-link" href="#whats-in-v100" title="Direct link to heading">#</a></h2><p>Everything I&#x27;ve mentioned so far has been working for a while! Over the last few months I&#x27;ve really solidified the implementation (basically a whole rewrite to be honest!):</p><ul><li>Better error handling and error messages</li><li>Better issue comparison. It now understands file renames and issues that around within the same file</li><li>The ability to run tests on a single file via the JS API, with <code>betterer.single</code></li><li>A whole bunch more tests!</li></ul><p>But I&#x27;ve also added a few key features that are worthy of a 1.0.0 release! üî•üî•üî•</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="force-update-"></a>Force Update (!)<a class="hash-link" href="#force-update-" title="Direct link to heading">#</a></h3><p>First things first, you can now run <strong>Betterer</strong> with the <code>--update</code> flag, and the snapshot will be updated even if it got worse! This is handy for when you need to ship something, even if it makes it temporarily worse:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#000000"><div class="token-line" style="color:#F8F8F2"><span class="token plain">betterer --update</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And because this is shamelessly stolen from Jest, you can also use <code>-u</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="watch-mode-"></a>Watch mode (!!!)<a class="hash-link" href="#watch-mode-" title="Direct link to heading">#</a></h3><p>This one is huge! All the changes that I made were building up to this. You can now run <strong>Betterer</strong> in watch mode and get feedback as you fix up issues:</p><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/z47lyc7qmtnnxov4ggra.gif" alt="Terminal output showing Betterer running in watch mode indicating that the &quot;no import from moment&quot; test has run on a specific file and got better" title="Watch mode"></p><p>Same rules apply here, the snapshot will update whenever the test gets better!</p><p>There&#x27;s a bunch of other cool things that could happen with watch mode (gamification much?), so I&#x27;m pumped that it&#x27;s working! ü§©</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="vs-code-extension-"></a>VS Code extension (!!!!!)<a class="hash-link" href="#vs-code-extension-" title="Direct link to heading">#</a></h3><p>Way to bury the lede! This is probably the coolest bit! Let&#x27;s just say it was a build up.</p><p><strong>Betterer</strong> runs entirely in its own world, so the usual <strong>ESLint</strong> or <strong>TypeScript</strong> extensions can&#x27;t report the issues. But everyone loves seeing red squiggly lines in the code editor, so <strong>Betterer</strong> now has <a href="https://marketplace.visualstudio.com/items?itemName=Betterer.betterer-vscode" target="_blank" rel="noopener noreferrer">its very own VS Code Extension</a> ü§Ø!</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="initialise-in-a-new-project"></a>Initialise in a new project<a class="hash-link" href="#initialise-in-a-new-project" title="Direct link to heading">#</a></h4><p>You can run the <code>betterer.init</code> command in a project! It will generate config files and update your <code>package.json</code> with scripts and dependencies:</p><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/7ij09ag7q2v12pv56h5x.gif" alt="VS Code screen capture output showing Betterer being initialised in a project" title="VS Code Extension Betterer init"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="see-all-issues-in-a-file"></a>See all issues in a file<a class="hash-link" href="#see-all-issues-in-a-file" title="Direct link to heading">#</a></h4><p>And when you&#x27;ve got some tests setup, it will show you all the existing issues in a file, and when they were first created. And it will show you any new issues as you make them:</p><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/uxmtcar93enfqgx12orr.gif" alt="VS Code screen capture output showing Betterer highlighting issues in a project" title="VS Code Extension Betterer issues"></p><p>I reckon that&#x27;s pretty sweet!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="so-whats-next"></a>So, what&#x27;s next?<a class="hash-link" href="#so-whats-next" title="Direct link to heading">#</a></h3><p>Well, you&#x27;re going to try out <a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer"><strong>Betterer</strong></a> and open lots of issues and help me make it better(er)! If you&#x27;d like to contribute...</p><ul><li>There are <em>definitely</em> bugs to fix</li><li>The test coverage is pretty good, but there aren&#x27;t any E2E tests for the VS Code extension yet</li><li>The logging and reporting implementation could use some work</li><li>There is so much documentation to be written</li></ul><p>What a time to be alive! ü§ì</p><p>In case you can&#x27;t tell, I&#x27;m unreasonably excited about this and I really think this will help with large and legacy codebases. Please let me know what you think in the comments or hit me up on the <a href="https://twitter.com/phenomnominal" target="_blank" rel="noopener noreferrer">Twitters</a>!</p></section></article><div><a href="https://github.com/phenomnomnominal/betterer/edit/master/website/blog/blog/2020-05-14-betterer-v1.0.0.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/betterer/blog/2020/05/14/improving-accessibility-with-betterer"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ Improving accessibility with Betterer</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-betterer" class="table-of-contents__link">What is <strong>Betterer</strong>?</a></li><li><a href="#how-does-it-work" class="table-of-contents__link">How does it work?</a></li><li><a href="#whats-in-v100" class="table-of-contents__link">What&#39;s in v1.0.0?</a><ul><li><a href="#force-update-" class="table-of-contents__link">Force Update (!)</a></li><li><a href="#watch-mode-" class="table-of-contents__link">Watch mode (!!!)</a></li><li><a href="#vs-code-extension-" class="table-of-contents__link">VS Code extension (!!!!!)</a></li><li><a href="#so-whats-next" class="table-of-contents__link">So, what&#39;s next?</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/betterer/docs/introduction">Betterer</a></li><li class="footer__item"><a class="footer__link-item" href="/betterer/docs/installation">Get started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/phenomnomnominal/betterer/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report an issue</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/betterer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discord.gg/YNgtXt6QVX" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/phenomnominal" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/betterer/docs/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/betterer/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/phenomnomnominal/betterer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://marketplace.visualstudio.com/items?itemName=Betterer.betterer-vscode" target="_blank" rel="noopener noreferrer" class="footer__link-item">VS Code extension</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Betterer Logo" src="/betterer/img/logo.png"></div><div class="footer__copyright">Copyright ¬© 2021 Craig Spence</div></div></div></footer></div>
<script src="/betterer/styles.f4cd9dbb.js"></script>
<script src="/betterer/runtime~main.13df5492.js"></script>
<script src="/betterer/main.32798573.js"></script>
<script src="/betterer/1.674ee4f8.js"></script>
<script src="/betterer/2.7bb78f3f.js"></script>
<script src="/betterer/ccc49370.727e72fc.js"></script>
<script src="/betterer/3d505d35.7db247e4.js"></script>
<script src="/betterer/399ce58b.998d4301.js"></script>
</body>
</html>